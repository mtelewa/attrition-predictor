
## Attrition Predictor

<div align="center">
	<img src="images/Employee-Attrition--Meaning--Types--Reason--and-How-to-Reduce.png">
</div>

[Image source & topic article](https://www.vantagecircle.com/en/blog/employee-attrition/)

[IBM HR Analytics Employee Attrition & Performance - GitHub](http://inseaddataanalytics.github.io/INSEADAnalytics/groupprojects/January2018FBL/IBM_Attrition_VSS.html)

The attrition predictor predicts whether an employee will remain in the workforce according to multiple factors like demographics, work culture, etc. Attrition in this context could be voulantary as well as involuntary leave from an organization for unpredictable or uncontrollable reasons. Managing and understanding attrition is pivotal for organizations to ensure a stable and engaged workforce. With a high attrition rate, a company is likely to shrink in size. Employee attrition leads to significant costs for a business, including the cost of business disruption, hiring and training new staff. Therefore, there is great business interest in understanding the drivers of, and minimizing staff attrition.

The main objective is to to predict if an employee is about to leave the company. This would allow human resources to intervene and prevent it by changing the conditions, if possible.

The statistical study and data analysis was carried out to understand how attrition (the target) is affected by other variables (features). The problem was treated as a classification model.

## Table of Contents

- [How to use this repo](#how-to-use-this-repo)
- [Dataset Content](#dataset-content)
- [Business Requirements](#business-requirements)
- [Hypothesis](#hypothesis-and-how-to-validate)
- [Mapping Business Requirements to Data Visualisation and ML Tasks](#the-rationale-to-map-the-business-requirements-to-the-data-visualizations-and-ml-tasks)
- [ML Business Case](#ml-business-case)
- [Epics and User Stories](#epics-and-user-stories)
- [Dashboard Design](#dashboard-design)
- [Technologies Used](#technologies-used)
- [Testing](#testing)
- [Unfixed Bugs](#unfixed-bugs)
- [Deployment](#deployment)
- [Credits](#credits)
- [Acknowledgements](#acknowledgements)


## How to use this repo

1. Use this template to create your GitHub project repo
1. Log into your cloud IDE with your GitHub account.
1. On your Dashboard, click on the New Workspace button
1. Paste in the URL you copied from GitHub earlier
1. Click Create
1. Wait for the workspace to open. This can take a few minutes.
1. Open a new terminal and `pip3 install -r requirements.txt`
1. Open the jupyter_notebooks directory, and click on the notebook you want to open.
1. Click the kernel button and choose Python Environments.

Note that the kernel says Python 3.8.18 as it inherits from the workspace, so it will be Python-3.8.18 as installed by our template. To confirm this, you can use `! python --version` in a notebook code cell.


## Dataset Content

* **Important data disclaimer**: This dataset was generated by IBM scientists and is made up of fictional data. The ML algorithm/predictor was built solely for learning purposes and shall not be used for drawing any real conclusions. As discussed [here](https://www.kaggle.com/datasets/pavansubhasht/ibm-hr-analytics-attrition-dataset/discussion/130319), the dataset is a snapshot i.e. is missing time series data thus the prediction might not be great for future events rather the current conditions.

* The dataset can be found on [Kaggle](https://www.kaggle.com/datasets/pavansubhasht/ibm-hr-analytics-attrition-dataset) and it consists of 1470 rows and 35 columns i.e. a total of 51450 data points. 9 columns are categorical of Object (or string) type while the rest (26 columns) are numerical of integer type. The following summary was obtained from `ProfileReport` imported from `ydata_profiling` library.

### The numerical columns (26 columns)
In 7 columns out of the 26, the integers denote a string value, therefore, they are discrete. They are explained as follows:

| Attribute                 | Information                                                | Units                                                            |
|---------------------------|------------------------------------------------------------|------------------------------------------------------------------|
| Education                 | Level of education of the employee                         | 1: Below College, 2: College, 3: Bachelor, 4: Master, 5: Doctor  |
| Environment Satisfaction  | Level of employee satisfaction in the workplace environment| 1: Low, 2: Medium, 3: High, 4: Very High                         |
| Jon Involvment            | How engaged is the employee in the workplace               | 1: Low, 2: Medium, 3: High, 4: Very High                         |
| Job Satisfaction          | Level of employee satisfaction from the job                | 1: Low, 2: Medium, 3: High, 4: Very High                         |
| Performance Rating        | Rating of employee performance                             | 1: Low, 2: Good, 3: Excellent, 4: Outstanding                    |
| Relationship Satisfaction | Rating of employee performance                             | 1: Low, 2: Medium, 3: High, 4: Very High                         |
| Work-Life Balance         | Level of employee work-life balance                        | 1: Bad, 2: Good, 3: Better, 4: Best                              |


In 19 columns out of the 26 numerical ones, the data summary is as follows:

| Attribute                 | Information                                                | Range        |
|---------------------------|------------------------------------------------------------|--------------|
| Age                       | Employee age 												 | 18 - 60      |
| **Daily Rate***           | Employee daily rate									   	 | 102 - 1499   |
| Distance from Home        | Distance from home to workplace						   	 | 1 - 29       |
| **Employee Count***       | Employee full time									   	 | 1            |
| **Employee Number***      | Employee ID											   	 | 1 - 2068     |
| **Hourly Rate***          | Employee hourly rate									   	 | 30 - 100     |
| Job level                 | Employee job level (hierarchical)						   	 | 1 - 5        |
| Monthly Income            | Employee monthly income 								   	 | 1009 - 19999 |
| **Monthly Rate***         | Monthly rate												 | 2094 - 26999 |
| Num Companies Worked      | Number of companies worked at		                         | 0 - 9        |
| Percent Salary Hike       | Percentage increase in salary between 2 years 			 | 11 - 25      |
| **Standard Hours***       | Standard working hours per week				 			 | 80	        |
| Stock Options Level       | How many company stocks an employee own from the company   | 0 - 3        |
| Total Working Years       | Total years worked   										 | 0 - 40       |
| Training Times Last Year  | Trainings the employee had   								 | 0 - 6        |
| Years At Company          | Number of years employee stayed at the company   			 | 0 - 40       |
| Years In Current Role     | Number of years employee stayed in current role		     | 0 - 18       |
| Years Since Last Promotion| Years since last promotion							     | 0 - 15       |
| Years With Curr Manager   | Years spent with current manager						     | 0 - 17       |


### The categorical columns (9 columns)

| Attribute                 | Information                                                | Units                                                                                  |
|---------------------------|------------------------------------------------------------|----------------------------------------------------------------------------------------|
| Attrition                 | Employee left? (Target)                                    | ['Yes', 'No']                                                                          |
| Business Travel           | Rate of employee business travels                          | ['Travel_Rarely', 'Travel_Frequently', 'Non-Travel']                                   |
| Department                | Employee department                                        | ['Sales', 'Research & Development', 'Human Resources']                                 |
| Education Field           | Employee education field                                   | ['Life Sciences', 'Other', 'Medical', 'Marketing', 'Technical Degree', 'Human Resources']|
| Gender                    | Employee gender                                            | ['Male', 'Female']                                                                     |
| Job Role                  | Employee role                                              | ['Sales Executive', 'Research Scientist', 'Laboratory Technician', 'Manufacturing Director', 'Healthcare Representative', 'Manager', 'Sales Representative', 'Research Director', 'Human Resources']                                                                           |
| Marital Status            | Employee marital status                                    | ['Single', 'Married', 'Divorced']                                                      |
| **Over18***               | Is Employee over 18?                                       | ['Y']                                                                                  |
| OverTime                  | Employee worked overtime?                                  | ['Yes', 'No']                                                                          |

The bold columns with aestric (*) are dropped as they either contain only one value (Employee count, Over 18, Standard hours) or considered to not affect the target (Employee number). Additionally, the hourly, daily and monthly rates were dropped as they are ambiguous (mentioned also in this [discussion](https://www.kaggle.com/datasets/pavansubhasht/ibm-hr-analytics-attrition-dataset/discussion/319276)). The focus was on the monthly income instead.


## Business Requirements
The client (a company's HR department) requested a ML algorithm from a data practitioner to predict attrition based on the dataset provided. The aim is to minimize attrition rates.

* Business Requirement 1 - The client is interested in understanding the main factors leading to attrition
* Business Requirement 2 - The client is interested in predicting whether a certain employee will decide to leave the company

## Hypothesis and how to validate?
* We suspect that monthly income plays a big role in attrition
	- Correlation analysis and plots
* We suspect that men tend to leave the workforce more often than women
	- Correlation analysis and plots
* We suspect that only few features affect attrition
	- Feature selection in the ML Pipeline

## The rationale to map the business requirements to the Data Visualizations and ML tasks
* Business Requirement 1: Data Visualization and Correlation study
	- We will inspect the dataset and look for patterns
	- We will plot the main features against attrition to visualize insights
	- We will do a feature importance analysis
* Business Requirement 2: Classification analysis
	- We want to predict if an employee will leave or not. We want to build a binary classifier.
	- We want to build a pipeline for the ML predictor algorithm

## ML Business Case

### Predict Attrition
#### Classification Model
- We want an ML model to predict if an employee will leave the company. The target variable is categorical and contains 2-classes. We consider a **classification model**. It is a supervised model, a 2-class, single-label, classification model output: 0 (no attrition), 1 (yes attrition)

- The ideal outcome is to provide the HR team with a prediction of whether an employee is leaving the company.
- The model success metrics are
	- At least 80% precision for no attrition, on train and test set. Because we want to be sure tha the employee is not intending to leave the company.
	- At least 60% precision for attrition on train and test set. Because we want to detect attririon as early as possible, we accept an even lower chance of an employee leaving in order to take action.


## Dashboard Design

### Page 1: Project summary
* Introduction to the project
* Project Dataset description
* State Business Requirements

### Page 2: Attrition Statistical Analysis
* State business requirement 1
* Checkbox: data inspection (display the first ten rows of the data)
* Display the most correlated variables to attrition and the conclusions
* Checkbox: Individual plots showing the attrition levels for each correlated variable 

### Page 3: Attrition predictor
- State business requirement 2
- Set of widgets inputs
- "Run predictive analysis" button that serves the prospect data to our ML pipelines and predicts if an employee will leave or not.

### Page 4: Project Hypothesis and Validation
- We report on whether the hypotheses were correct.

### Page 5: Technical details
- Considerations and conclusions after the pipeline is trained
- Present ML pipeline steps

### Page 6: Summary
- Feature importance (and relate to business requirement 1)
- Pipeline performance


## Main Data Analysis and Machine Learning Libraries
The technologies used throughout the development are listed below:

### Languages

* [Python](https://www.python.org/)

### Python Packages

* [Pandas](https://pandas.pydata.org/docs/index.html) - Data analysis and manipulation tool
* [Numpy](https://numpy.org/doc/stable/index.html) - The fundamental package for scientific computing with Python
* [YData Profiling](https://docs.profiling.ydata.ai/latest/) - For data profiling and exploratory data analysis
* [Matplotlib](https://matplotlib.org/) - Comprehensive library for creating static, animated and interactive visualisations
* [Seaborn](https://seaborn.pydata.org/) - Data visualisation library for drawing attractive and informative statistical graphics
* [Pingouin](https://pingouin-stats.org/build/html/index.html) - Statistical package for simple yet exhaustive stats functions
* [Feature-engine](https://feature-engine.trainindata.com/en/latest/) - Transformers to engineer and select features for machine learning models
* [ppscore](https://pypi.org/project/ppscore/) - Data-type-agnostic score that can detect linear or non-linear relationships between two columns
* [scikit-learn](https://scikit-learn.org/stable/) - Machine learning library for training the ML model
* [XGBoost](https://xgboost.readthedocs.io/en/stable/) - Optimised distributed gradient boosting library
* [Imbalanced-learn](https://imbalanced-learn.org/stable/) - Tool for dealing with classification problems with imbalanced target
* [Joblib](https://joblib.readthedocs.io/en/stable/) - Tool for dumping pipeline to pickle files
* [Kaggle](https://pypi.org/project/kaggle/) - Kaggle API functionalit
* [Streamlit](https://streamlit.io/) - Build the web app.

### Other Technologies

* [Git](https://git-scm.com/) - For version control
* [GitHub](https://github.com/) - Code repository
* [Heroku](https://heroku.com) - For application deployment
* [Gitpod](https://www.gitpod.io/) - Cloud IDE used for development
* [Jupyter Notebook](https://jupyter.org/) - Interactive Python
* [CI Python Linter](https://pep8ci.herokuapp.com/) - Style guide for python



## Testing


## Unfixed Bugs
* You will need to mention unfixed bugs and why they were not fixed. This section should include shortcomings of the frameworks or technologies used. Although time can be a significant variable to consider, paucity of time and difficulty understanding implementation is not a valid reason to leave bugs unfixed.



## Deployment

### Set Heroku stack

To log into the Heroku toolbelt CLI:

0. Install the client in the terminal `curl https://cli-assets.heroku.com/install-ubuntu.sh | sh`
1. Log in to your Heroku account and go to _Account Settings_ in the menu under your avatar.
2. Scroll down to the _API Key_ and click _Reveal_
3. Copy the key
4. In the terminal, run `heroku_login -i`
5. Enter your email and paste in your API key when asked
6. Set the stack to heroku-20 `heroku stack:set heroku-20 --app attrition-predictor`


* The App live link is: https://YOUR_APP_NAME.herokuapp.com/ 
* Set the runtime.txt Python version to a [Heroku-20](https://devcenter.heroku.com/articles/python-support#supported-runtimes) stack currently supported version.
* The project was deployed to Heroku using the following steps.

1. Log in to Heroku and create an App
2. At the Deploy tab, select GitHub as the deployment method.
3. Select your repository name and click Search. Once it is found, click Connect.
4. Select the branch you want to deploy, then click Deploy Branch.
5. The deployment process should happen smoothly if all deployment files are fully functional. Click now the button Open App on the top of the page to access your App.
6. If the slug size is too large then add large files not required for the app to the .slugignore file.


## Credits 

* In this section, you need to reference where you got your content, media and extra help from. It is common practice to use code from other repositories and tutorials, however, it is important to be very specific about these sources to avoid plagiarism. 
* You can break the credits section up into Content and Media, depending on what you have included in your project. 

### Content 

- The text for the Home page was taken from Wikipedia Article A
- Instructions on how to implement form validation on the Sign-Up page was taken from [Specific YouTube Tutorial](https://www.youtube.com/)
- The icons in the footer were taken from [Font Awesome](https://fontawesome.com/)

### Media

- The photos used on the home and sign-up page are from This Open-Source site
- The images used for the gallery page were taken from this other open-source site


## Acknowledgements (optional)
* Thanks to my mentor Mo Shami, for his support and guidance on the execution of the project. Thanks to Sean Tilson, my colleague at code institute for the discussion on the model performance.

